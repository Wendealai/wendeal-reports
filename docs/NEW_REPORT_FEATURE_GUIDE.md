# 新增报告功能使用指南

## 功能概述

新增报告功能允许您直接通过粘贴HTML代码来创建新的研究报告，无需上传文件。这个功能特别适合：

- 从网页复制的研究内容
- 自己编写的HTML格式报告
- 从其他系统导出的HTML内容
- 快速创建简单的文本报告

## 如何使用

### 1. 打开新增报告对话框

在仪表板页面的顶部工具栏中，点击 **"新增报告"** 按钮（紫色渐变按钮，带有文档图标）。

### 2. 填写报告信息

#### 必填字段：

- **报告标题**：输入报告的标题
- **HTML内容**：粘贴您的HTML代码

#### 可选字段：

- **报告描述**：手动输入描述，或让系统自动提取
- **分类**：选择报告所属的分类
- **优先级**：设置报告的优先级（低/中/高/紧急）
- **标签**：添加相关标签，便于后续搜索和分类

### 3. 智能内容提取

系统会自动从您粘贴的HTML内容中提取：

- **标题**：从 `<title>`、`<h1>` 或 `<h2>` 标签中提取
- **描述**：从HTML内容中提取前200个字符作为摘要

如果自动提取的内容不满意，您可以手动修改。

### 4. 添加标签

- 在标签输入框中输入标签名称
- 按回车键或点击"添加"按钮来添加标签
- 点击标签旁边的 × 来删除标签

### 5. 创建报告

点击 **"创建报告"** 按钮完成报告创建。系统会：

- 验证必填字段
- 保存报告到数据库
- 自动计算文件大小和字数
- 更新分类统计
- 关闭对话框并返回仪表板

## HTML内容示例

### 简单文本报告

```html
<h1>AI技术发展趋势分析</h1>
<p>本报告分析了2024年人工智能技术的主要发展趋势...</p>
<h2>主要发现</h2>
<ul>
  <li>大语言模型持续发展</li>
  <li>多模态AI应用增加</li>
  <li>AI安全性受到重视</li>
</ul>
```

### 带样式的报告

```html
<div style="font-family: Arial, sans-serif;">
  <h1 style="color: #2563eb;">市场分析报告</h1>
  <p style="line-height: 1.6;">本季度市场表现...</p>
  <table style="border-collapse: collapse; width: 100%;">
    <tr>
      <th style="border: 1px solid #ddd; padding: 8px;">指标</th>
      <th style="border: 1px solid #ddd; padding: 8px;">数值</th>
    </tr>
    <tr>
      <td style="border: 1px solid #ddd; padding: 8px;">增长率</td>
      <td style="border: 1px solid #ddd; padding: 8px;">15%</td>
    </tr>
  </table>
</div>
```

## 功能特点

### ✅ 智能提取

- 自动从HTML中提取标题和描述
- 支持多种HTML标签结构
- 保留原始格式和样式

### ✅ 实时预览

- 输入内容时实时更新字段
- 智能建议标题和描述
- 即时验证必填字段

### ✅ 完整集成

- 与现有分类系统完全兼容
- 支持所有报告管理功能
- 自动更新统计数据

### ✅ 用户友好

- 直观的表单界面
- 清晰的错误提示
- 流畅的操作体验

## 注意事项

1. **HTML格式**：确保粘贴的是有效的HTML代码
2. **内容长度**：建议HTML内容不要过长，以免影响性能
3. **标题提取**：如果自动提取的标题不准确，请手动修改
4. **分类选择**：选择合适的分类有助于后续管理
5. **标签使用**：添加相关标签便于搜索和筛选

## 快捷键

- **回车键**：在标签输入框中按回车添加标签
- **Esc键**：关闭对话框（仅在未提交时）
- **Tab键**：在表单字段间切换

## 故障排除

### 问题：无法创建报告

**解决方案**：

- 检查标题和HTML内容是否已填写
- 确认网络连接正常
- 查看浏览器控制台是否有错误信息

### 问题：标题提取不准确

**解决方案**：

- 手动修改标题字段
- 确保HTML中包含 `<title>`、`<h1>` 或 `<h2>` 标签

### 问题：分类选择器无响应

**解决方案**：

- 刷新页面重试
- 检查是否有分类数据加载

## 技术实现

新增报告功能基于以下技术栈：

- **前端**：React + TypeScript
- **状态管理**：Zustand
- **API**：Next.js API Routes
- **数据库**：Prisma + SQLite
- **样式**：Tailwind CSS + 内联样式

## 更新日志

### v1.0.0 (2024-01-20)

- ✅ 初始版本发布
- ✅ 支持HTML内容粘贴
- ✅ 智能标题和描述提取
- ✅ 完整的表单验证
- ✅ 与现有系统集成

---

如有问题或建议，请联系开发团队。
