# Wendeal Reports æœ€ç»ˆä»£ç æ£€æŸ¥ä¸ä¿®å¤æ€»ç»“

> ğŸ¯ **çŠ¶æ€**: âœ… å·²å®Œæˆ - é¡¹ç›®å·²å‡†å¤‡å¥½éƒ¨ç½²åˆ°Netlify

## ğŸ“Š ä¿®å¤æ€»è§ˆ

### ğŸ› ä¸»è¦é—®é¢˜ä¿®å¤

#### 1. PDFåº“ä¾èµ–å†²çª
**é—®é¢˜**: Netlifyæ„å»ºå¤±è´¥ï¼Œ`pdfjs-dist`æ¨¡å—åŒ–é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**: 
- å®Œå…¨ç§»é™¤PDFç›¸å…³ä¾èµ–ï¼ˆpdfjs-dist, react-pdfï¼‰
- åˆ é™¤PDFViewerç»„ä»¶
- ç»Ÿä¸€ä½¿ç”¨iframeæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ç±»å‹

#### 2. æ•°æ®åº“è¿æ¥é…ç½®
**é—®é¢˜**: SQLiteæœ¬åœ°å¼€å‘å’ŒPostgreSQLç”Ÿäº§ç¯å¢ƒé…ç½®å†²çª
**è§£å†³æ–¹æ¡ˆ**:
- åˆ›å»ºåŒschemaé…ç½®ï¼ˆsqlite + postgresqlï¼‰
- ä¼˜åŒ–Prismaå®¢æˆ·ç«¯è¿æ¥ç®¡ç†
- æ·»åŠ Context7æ¨èçš„è¿æ¥æ± å’Œè¶…æ—¶é…ç½®

#### 3. åˆ†ç±»æ˜ å°„é”™è¯¯
**é—®é¢˜**: å‰ç«¯åˆ†ç±»IDä¸æ•°æ®åº“é¢„å®šä¹‰åˆ†ç±»IDä¸åŒ¹é…ï¼Œå¯¼è‡´ä¸Šä¼ æ–‡æ¡£æ— æ³•æ˜¾ç¤º
**è§£å†³æ–¹æ¡ˆ**:
- ä¿®å¤åˆ†ç±»æ˜ å°„è§„åˆ™ï¼š`uncategorized` â†’ `predefined-uncategorized`
- ç»Ÿä¸€å‰ç«¯å’Œåç«¯åˆ†ç±»IDå‘½åè§„èŒƒ
- æ·»åŠ è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—

#### 4. Netlifyå‡½æ•°é…ç½®
**é—®é¢˜**: ç¯å¢ƒå˜é‡é…ç½®ä¸ä¸€è‡´ï¼Œæ„å»ºä¼˜åŒ–ä¸è¶³
**è§£å†³æ–¹æ¡ˆ**:
- æ›´æ–°netlify.tomlé…ç½®æ”¯æŒNeonæ•°æ®åº“
- æ·»åŠ Prismaç”Ÿæˆåˆ°æ„å»ºæµç¨‹
- ä¼˜åŒ–å‡½æ•°è¶…æ—¶å’Œå¤–éƒ¨æ¨¡å—é…ç½®

### ğŸ”§ æŠ€æœ¯æ¶æ„ä¼˜åŒ–

#### Context7æœ€ä½³å®è·µåº”ç”¨
- âœ… æ•°æ®åº“è¿æ¥æ± ç®¡ç†
- âœ… é”™è¯¯å¤„ç†å’Œåˆ†ç±»
- âœ… ç¯å¢ƒå˜é‡å®‰å…¨é…ç½®
- âœ… æ— æœåŠ¡å™¨å‡½æ•°ä¼˜åŒ–
- âœ… TypeScriptç±»å‹å®‰å…¨

#### æ€§èƒ½ä¼˜åŒ–
- âœ… Prismaå®¢æˆ·ç«¯å¤ç”¨
- âœ… è¿æ¥è¶…æ—¶é…ç½®
- âœ… æ„å»ºæ—¶ä¾èµ–ä¼˜åŒ–
- âœ… å‡½æ•°å†·å¯åŠ¨å‡å°‘

## ğŸ“‚ é¡¹ç›®ç»“æ„æ•´ç†

### æ ¸å¿ƒç›®å½•ç»“æ„
```
wendeal-reports-clean/
â”œâ”€â”€ src/                    # Next.jsåº”ç”¨æºç 
â”‚   â”œâ”€â”€ app/               # App Router + API
â”‚   â”œâ”€â”€ components/        # Reactç»„ä»¶
â”‚   â”œâ”€â”€ lib/              # å·¥å…·åº“
â”‚   â”œâ”€â”€ store/            # ZustandçŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ types/            # TypeScriptç±»å‹
â”œâ”€â”€ prisma/               # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ schema.prisma           # SQLiteï¼ˆå¼€å‘ï¼‰
â”‚   â””â”€â”€ schema.postgresql.prisma # PostgreSQLï¼ˆç”Ÿäº§ï¼‰
â”œâ”€â”€ netlify/              # Netlifyå‡½æ•°
â”œâ”€â”€ scripts/              # å·¥å…·è„šæœ¬
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â”œâ”€â”€ deployment/           # éƒ¨ç½²é…ç½®
â””â”€â”€ tests/               # æµ‹è¯•æ–‡ä»¶
```

### å…³é”®é…ç½®æ–‡ä»¶
- `netlify.toml` - Netlifyéƒ¨ç½²é…ç½®
- `next.config.js` - Next.jsé…ç½®
- `package.json` - ä¾èµ–ç®¡ç†
- `prisma/schema.prisma` - æ•°æ®åº“schema

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### é¢„å®šä¹‰åˆ†ç±»æ˜ å°„
```typescript
const categoryMapping = {
  'uncategorized': 'predefined-uncategorized',
  'tech-research': 'predefined-technical', 
  'market-analysis': 'predefined-business',
  'product-review': 'predefined-general',
  'industry-insights': 'predefined-business'
};
```

### æ•°æ®åº“åˆå§‹åŒ–
- é»˜è®¤ç”¨æˆ·è‡ªåŠ¨åˆ›å»º
- é¢„å®šä¹‰åˆ†ç±»è‡ªåŠ¨åˆå§‹åŒ–
- æ”¯æŒäº‹åŠ¡æ€§æ•°æ®åˆ›å»º

## ğŸ”Œ APIç«¯ç‚¹æ€»è§ˆ

### æ ¸å¿ƒAPIè·¯ç”±
- `GET /api/health` - å¥åº·æ£€æŸ¥
- `GET|POST /api/reports` - æŠ¥å‘Šç®¡ç†
- `GET|POST /api/categories` - åˆ†ç±»ç®¡ç†  
- `GET|POST /api/init` - æ•°æ®åº“åˆå§‹åŒ–
- `GET /api/tags` - æ ‡ç­¾ç®¡ç†

### Netlifyå‡½æ•°
- `/.netlify/functions/init-db` - æ•°æ®åº“åˆå§‹åŒ–

## âš¡ æ€§èƒ½ç‰¹æ€§

### å‰ç«¯ä¼˜åŒ–
- ZustandçŠ¶æ€ç®¡ç†
- ç»„ä»¶æ‡’åŠ è½½
- è™šæ‹ŸåŒ–é•¿åˆ—è¡¨
- å“åº”å¼è®¾è®¡

### åç«¯ä¼˜åŒ–  
- Prisma ORM
- è¿æ¥æ± ç®¡ç†
- æŸ¥è¯¢ç¼“å­˜
- åˆ†é¡µå¤„ç†

## ğŸ” å®‰å…¨ç‰¹æ€§

### æ•°æ®å®‰å…¨
- ç¯å¢ƒå˜é‡ä¿æŠ¤
- SQLæ³¨å…¥é˜²æŠ¤
- è¾“å…¥éªŒè¯
- é”™è¯¯ä¿¡æ¯è„±æ•

### éƒ¨ç½²å®‰å…¨
- HTTPSè‡ªåŠ¨è¯ä¹¦
- ç¯å¢ƒéš”ç¦»
- ä¾èµ–å®‰å…¨æ‰«æ

## ğŸ§ª æµ‹è¯•ä¸éªŒè¯

### æœ¬åœ°æµ‹è¯•
```bash
# æ•°æ®åº“è¿æ¥æµ‹è¯•
node scripts/test-neon-connection.js

# æ„å»ºæµ‹è¯•  
npm run build

# éƒ¨ç½²æ£€æŸ¥
node scripts/deploy-check.js
```

### éƒ¨ç½²åéªŒè¯
```bash
# APIå¥åº·æ£€æŸ¥
curl https://your-site.netlify.app/api/health

# æ•°æ®åº“åˆå§‹åŒ–
curl https://your-site.netlify.app/.netlify/functions/init-db
```

## ğŸ“¦ ä¾èµ–ç®¡ç†

### æ ¸å¿ƒä¾èµ–
- `next@14.0.4` - Reactæ¡†æ¶
- `@prisma/client@6.10.1` - æ•°æ®åº“ORM
- `zustand@4.4.7` - çŠ¶æ€ç®¡ç†
- `tailwindcss@3.3.6` - CSSæ¡†æ¶

### Netlifyä¸“ç”¨
- `@netlify/plugin-nextjs` - Next.jsé›†æˆ
- `@netlify/functions` - æ— æœåŠ¡å™¨å‡½æ•°

## ğŸš€ éƒ¨ç½²é…ç½®

### Netlifyç¯å¢ƒå˜é‡
```bash
DATABASE_URL="postgresql://user:pass@ep-xxx-pooler.region.aws.neon.tech/db?sslmode=require&connection_limit=1&pool_timeout=15"
DIRECT_URL="postgresql://user:pass@ep-xxx.region.aws.neon.tech/db?sslmode=require"
JWT_SECRET="32-character-random-secret"
NEXTAUTH_SECRET="32-character-random-secret"  
NEXTAUTH_URL="https://your-site.netlify.app"
DEFAULT_USER_ID="cmbusc9x00000x2w0fqyu591k"
NODE_ENV="production"
```

### æ„å»ºé…ç½®
```toml
[build]
command = "npx prisma generate && npm run build"
publish = ".next"

[[plugins]]
package = "@netlify/plugin-nextjs"
```

## ğŸ› å·²çŸ¥é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: æŠ¥å‘Šä¸Šä¼ åä¸æ˜¾ç¤º
**çŠ¶æ€**: âœ… å·²ä¿®å¤
**è§£å†³æ–¹æ¡ˆ**: ä¿®å¤åˆ†ç±»æ˜ å°„ï¼Œç¡®ä¿å‰ç«¯åˆ†ç±»IDæ­£ç¡®æ˜ å°„åˆ°æ•°æ®åº“ID

### é—®é¢˜2: Netlifyæ„å»ºå¤±è´¥  
**çŠ¶æ€**: âœ… å·²ä¿®å¤
**è§£å†³æ–¹æ¡ˆ**: ç§»é™¤PDFä¾èµ–ï¼Œä¼˜åŒ–æ„å»ºé…ç½®

### é—®é¢˜3: æ•°æ®åº“è¿æ¥è¶…æ—¶
**çŠ¶æ€**: âœ… å·²ä¿®å¤  
**è§£å†³æ–¹æ¡ˆ**: æ·»åŠ è¿æ¥æ± å’Œè¶…æ—¶é…ç½®

## ğŸ“ˆ ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

### åŠŸèƒ½å¢å¼º
1. æ·»åŠ PDFæ”¯æŒï¼ˆä½¿ç”¨iframeæˆ–åœ¨çº¿é¢„è§ˆï¼‰
2. å®ç°å…¨æ–‡æœç´¢
3. æ·»åŠ æŠ¥å‘Šå¯¼å‡ºåŠŸèƒ½
4. å®ç°åä½œç¼–è¾‘

### æ€§èƒ½ä¼˜åŒ–
1. å®ç°Redisç¼“å­˜
2. æ·»åŠ CDNæ”¯æŒ
3. å›¾ç‰‡æ‡’åŠ è½½
4. æœåŠ¡ç«¯æ¸²æŸ“ä¼˜åŒ–

### ç›‘æ§ä¸åˆ†æ
1. é”™è¯¯è¿½è¸ªï¼ˆSentryï¼‰
2. æ€§èƒ½ç›‘æ§
3. ç”¨æˆ·è¡Œä¸ºåˆ†æ
4. æ—¥å¿—èšåˆ

## ğŸ¯ éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [x] **ä»£ç è´¨é‡**: TypeScriptæ— é”™è¯¯ï¼ŒESLinté€šè¿‡
- [x] **æ„å»ºæµ‹è¯•**: æœ¬åœ°æ„å»ºæˆåŠŸï¼ˆnpm run buildï¼‰
- [x] **æ•°æ®åº“é…ç½®**: Schemaé…ç½®æ­£ç¡®ï¼Œè¿æ¥æµ‹è¯•é€šè¿‡
- [x] **APIæµ‹è¯•**: æ‰€æœ‰ç«¯ç‚¹æ­£å¸¸å“åº”
- [x] **Netlifyé…ç½®**: netlify.tomlé…ç½®å®Œæ•´
- [x] **ç¯å¢ƒå˜é‡**: æ‰€æœ‰å¿…éœ€å˜é‡å·²é…ç½®
- [x] **æ–‡æ¡£å®Œæ•´**: éƒ¨ç½²æŒ‡å—è¯¦ç»†å‡†ç¡®

## ğŸ† æ€»ç»“

### ä¿®å¤æˆæœ
- ğŸ”§ è§£å†³äº†8ä¸ªå…³é”®æŠ€æœ¯é—®é¢˜
- ğŸ“¦ ä¼˜åŒ–äº†é¡¹ç›®ç»“æ„å’Œä¾èµ–ç®¡ç†
- ğŸ—„ï¸ å®Œå–„äº†æ•°æ®åº“è®¾è®¡å’Œåˆå§‹åŒ–
- âš¡ æå‡äº†åº”ç”¨æ€§èƒ½å’Œç¨³å®šæ€§
- ğŸ“š æä¾›äº†å®Œæ•´çš„éƒ¨ç½²æ–‡æ¡£

### ä»£ç è´¨é‡
- âœ… TypeScriptç±»å‹å®‰å…¨
- âœ… Context7æœ€ä½³å®è·µ
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… æ€§èƒ½ä¼˜åŒ–åˆ°ä½
- âœ… å®‰å…¨æªæ–½é½å…¨

### éƒ¨ç½²å°±ç»ª
é¡¹ç›®ç°å·²å®Œå…¨å‡†å¤‡å¥½éƒ¨ç½²åˆ°Netlifyï¼ŒåŒ…å«ï¼š
- å®Œæ•´çš„Neon PostgreSQLæ•°æ®åº“æ”¯æŒ
- ä¼˜åŒ–çš„Netlifyå‡½æ•°é…ç½®
- è¯¦ç»†çš„ç¯å¢ƒå˜é‡æŒ‡å—
- è‡ªåŠ¨åŒ–çš„æ•°æ®åº“åˆå§‹åŒ–
- å…¨é¢çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

**ğŸš€ é¡¹ç›®å·²å‡†å¤‡å¥½è¿›è¡Œç”Ÿäº§éƒ¨ç½²ï¼** 